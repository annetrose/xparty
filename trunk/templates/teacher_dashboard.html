{% extends "side_navigation_layout.html" %}
{# vim: set sw=2 ts=2 expandtab: #}

{% block head %}
  <title>XParty - Teacher Dashboard</title>
  <script type="text/javascript" src="/js/common.js"></script>
  <script type="text/javascript" src="/js/lesson.js?version=072512"></script>
    
  <script type="text/javascript">
    // <![CDATA[    
    {{ lessons|init_lessons_js }}
    
    var g_task_ctrls;
    var g_dbg_timestamp = {% if dbg_timestamp %}"{{ dbg_timestamp }}"{% else %}undefined{% endif %};
    
    $(document).ready(function() {  
       updateUI(true);
    });

    function updateUI(init) {
       var hash = window.location.hash;
       if (hash != '') {
          var hashTokens = hash.split(':');
          var lessonCode = hashTokens[0].substring(1);
          showLessonForm(lessonCode);
       }
       else {
          showLessonLists(undefined, false); 
       }
    }
    // ]]>
  </script>
{% endblock %}

{% block top %}
<div id="message" title="Message" style="display:none"></div>
<div class="container_16 cntrmain">
  <div class="grid_16 branding">
      {{ header|safe }}
      <br/>
      {% if msg %}<div class="msg"><p>{{ msg }}</p></div>{% endif %}
      <div class="clear"></div>
  </div><!--- end grid_16 -->
</div><!-- end container_16 -->
{% endblock %}

{% block side_panel %}
  <div id="side_button_bar">
    <button class="load_btn cssbtn" id="create_lesson_btn" onclick="showLessonForm('', g_dbg_timestamp);">Create Activity</button><br/>
    <button class="load_btn cssbtn" id="stop_lessons_btn" onclick="stopAllLessons(); return false;">Stop All Activities</button><br/>
    <button class="load_btn cssbtn" id="delete_lessons_btn" onclick="deleteAllLessons(); return false;">Delete All Activities</button><br/>
  </div>
{% endblock %}

{% block content_area %}
  <div id="data_container">
	<header class="info">
		<span id="content_title" class="h2"></span>
		<span id="lesson_filter" style="margin-left:5px"></span>
	</header>
	<div id="error" style="color:red; margin:10px 5px 5px 5px; display:none"></div>
    <div id="content"></div>
  </div>
{% endblock %}

{% block bottom %}
{% endblock %}
